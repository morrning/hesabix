!function(e,t){var n=t();"function"==typeof define&&define.amd?define([],n.Routing):"object"==typeof module&&module.exports?module.exports=n.Routing:(e.Routing=n.Routing,e.fos={Router:n.Router})}(this,function(){function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},e.apply(this,arguments)}function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var i={};Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=i.Routing=i.Router=void 0;var s=function(){function o(e,t){n(this,o),this.context_=e||{base_url:"",prefix:"",host:"",port:"",scheme:"",locale:""},this.setRoutes(t||{})}return r(o,[{key:"setRoutingData",value:function(e){this.setBaseUrl(e.base_url),this.setRoutes(e.routes),"undefined"!=typeof e.prefix&&this.setPrefix(e.prefix),"undefined"!=typeof e.port&&this.setPort(e.port),"undefined"!=typeof e.locale&&this.setLocale(e.locale),this.setHost(e.host),"undefined"!=typeof e.scheme&&this.setScheme(e.scheme)}},{key:"setRoutes",value:function(e){this.routes_=Object.freeze(e)}},{key:"getRoutes",value:function(){return this.routes_}},{key:"setBaseUrl",value:function(e){this.context_.base_url=e}},{key:"getBaseUrl",value:function(){return this.context_.base_url}},{key:"setPrefix",value:function(e){this.context_.prefix=e}},{key:"setScheme",value:function(e){this.context_.scheme=e}},{key:"getScheme",value:function(){return this.context_.scheme}},{key:"setHost",value:function(e){this.context_.host=e}},{key:"getHost",value:function(){return this.context_.host}},{key:"setPort",value:function(e){this.context_.port=e}},{key:"getPort",value:function(){return this.context_.port}},{key:"setLocale",value:function(e){this.context_.locale=e}},{key:"getLocale",value:function(){return this.context_.locale}},{key:"buildQueryParams",value:function(e,n,o){var r,i=this,s=new RegExp(/\[\]$/);if(n instanceof Array)n.forEach(function(n,r){s.test(e)?o(e,n):i.buildQueryParams(e+"["+("object"===t(n)?r:"")+"]",n,o)});else if("object"===t(n))for(r in n)this.buildQueryParams(e+"["+r+"]",n[r],o);else o(e,n)}},{key:"getRoute",value:function(e){var t=this.context_.prefix+e,n=e+"."+this.context_.locale,o=this.context_.prefix+e+"."+this.context_.locale,r=[t,n,o,e];for(var i in r)if(r[i]in this.routes_)return this.routes_[r[i]];throw new Error('The route "'+e+'" does not exist.')}},{key:"generate",value:function(t,n,r){var i=this.getRoute(t),s=n||{},u=e({},s),a="",c=!0,f="",l="undefined"==typeof this.getPort()||null===this.getPort()?"":this.getPort();if(i.tokens.forEach(function(e){if("text"===e[0]&&"string"==typeof e[1])return a=o.encodePathComponent(e[1])+a,void(c=!1);{if("variable"!==e[0])throw new Error('The token type "'+e[0]+'" is not supported.');6===e.length&&e[5]===!0&&(c=!1);var n=i.defaults&&!Array.isArray(i.defaults)&&"string"==typeof e[3]&&e[3]in i.defaults;if(!1===c||!n||"string"==typeof e[3]&&e[3]in s&&!Array.isArray(i.defaults)&&s[e[3]]!=i.defaults[e[3]]){var r;if("string"==typeof e[3]&&e[3]in s)r=s[e[3]],delete u[e[3]];else{if("string"!=typeof e[3]||!n||Array.isArray(i.defaults)){if(c)return;throw new Error('The route "'+t+'" requires the parameter "'+e[3]+'".')}r=i.defaults[e[3]]}var f=!0===r||!1===r||""===r;if(!f||!c){var l=o.encodePathComponent(r);"null"===l&&null===r&&(l=""),a=e[1]+l+a}c=!1}else n&&"string"==typeof e[3]&&e[3]in u&&delete u[e[3]]}}),""===a&&(a="/"),i.hosttokens.forEach(function(e){var t;return"text"===e[0]?void(f=e[1]+f):void("variable"===e[0]&&(e[3]in s?(t=s[e[3]],delete u[e[3]]):i.defaults&&!Array.isArray(i.defaults)&&e[3]in i.defaults&&(t=i.defaults[e[3]]),f=e[1]+t+f))}),a=this.context_.base_url+a,i.requirements&&"_scheme"in i.requirements&&this.getScheme()!=i.requirements._scheme){var h=f||this.getHost();a=i.requirements._scheme+"://"+h+(h.indexOf(":"+l)>-1||""===l?"":":"+l)+a}else if("undefined"!=typeof i.schemes&&"undefined"!=typeof i.schemes[0]&&this.getScheme()!==i.schemes[0]){var p=f||this.getHost();a=i.schemes[0]+"://"+p+(p.indexOf(":"+l)>-1||""===l?"":":"+l)+a}else f&&this.getHost()!==f+(f.indexOf(":"+l)>-1||""===l?"":":"+l)?a=this.getScheme()+"://"+f+(f.indexOf(":"+l)>-1||""===l?"":":"+l)+a:r===!0&&(a=this.getScheme()+"://"+this.getHost()+(this.getHost().indexOf(":"+l)>-1||""===l?"":":"+l)+a);if(Object.keys(u).length>0){var y=[],d=function(e,t){t="function"==typeof t?t():t,t=null===t?"":t,y.push(o.encodeQueryComponent(e)+"="+o.encodeQueryComponent(t))};for(var g in u)u.hasOwnProperty(g)&&this.buildQueryParams(g,u[g],d);a=a+"?"+y.join("&")}return a}}],[{key:"getInstance",value:function(){return u}},{key:"setData",value:function(e){var t=o.getInstance();t.setRoutingData(e)}},{key:"customEncodeURIComponent",value:function(e){return encodeURIComponent(e).replace(/%2F/g,"/").replace(/%40/g,"@").replace(/%3A/g,":").replace(/%21/g,"!").replace(/%3B/g,";").replace(/%2C/g,",").replace(/%2A/g,"*").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}},{key:"encodePathComponent",value:function(e){return o.customEncodeURIComponent(e).replace(/%3D/g,"=").replace(/%2B/g,"+").replace(/%21/g,"!").replace(/%7C/g,"|")}},{key:"encodeQueryComponent",value:function(e){return o.customEncodeURIComponent(e).replace(/%3F/g,"?")}}]),o}();i.Router=s;var u=new s;i.Routing=u;var a=u;return i["default"]=a,{Router:s,Routing:u}});